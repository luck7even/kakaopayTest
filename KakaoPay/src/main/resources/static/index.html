<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v4.1.1">
    <title>단건결제</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.5/examples/product/">

    <!-- Bootstrap core CSS -->
	<link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>
    <!-- Custom styles for this template -->
    <link href="product.css" rel="stylesheet">
    
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/styles/default.min.css">
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/highlight.min.js"></script>
	<script>
		function complete(obj){
			document.getElementById("codeblock2").innerHTML = JSON.stringify(obj, undefined, 4);
			document.querySelectorAll('pre code').forEach((block) => {
				hljs.highlightBlock(block);
			});
		}
	</script>
  
  </head>
  <body>
    <div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm">
	  <h5 class="my-0 mr-md-auto font-weight-normal">카카오페이</h5>
	  <nav class="my-2 my-md-0 mr-md-3">
	    <a class="p-2 text-dark" href="/index.html">단건결제</a>
	    <a class="p-2 text-dark" href="/subscription.html">정기결제</a>
	    <a class="p-2 text-dark" href="/database.html">결제내역</a>
	  </nav>
	</div>

	<div class="d-md-flex flex-md-equal w-100 my-md-3 pl-md-3">
	  <div class="bg-light mr-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden">
	    <div class="my-3 p-3">
	      <h4 class="mb-3">결제준비</h4>
	      <form id="my-form-id" name="my-form-id">
	        <div class="row">
	          <div class="col-md-6 mb-3 form-group">
	            <label>가맹점 코드, 10자</label>
	            <input type="text" class="form-control" id="cid" name="cid" value="TCSUBSCRIP">
	          </div>
	          <div class="col-md-6 mb-3 form-group">
				<label>가맹점 코드 인증키</label>
			    <input type="text" class="form-control" id="cid_secret" name="cid_secret" value="testMerchant">
	          </div>
	          <div class="col-md-6 mb-3 form-group">
				<label>가맹점 주문번호</label>
		    	<input type="text" class="form-control" id="partner_order_id" name="partner_order_id" value="A202012100158785">
	          </div>
	          <div class="col-md-6 mb-3 form-group">
				<label>가맹점 회원 id</label>
		    	<input type="text" class="form-control" id="partner_user_id" name="partner_user_id" value="luck7even">
	          </div>
	          <div class="col-md-6 mb-3 form-group">
				<label>상품명</label>
		    	<input type="text" class="form-control" id="item_name" name="item_name" value="초코파이">
	          </div>
	          <div class="col-md-6 mb-3 form-group">
				<label>상품 수량</label>
		    	<input type="text" class="form-control" id="quantity" name="quantity" value="1">
	          </div>
	          <div class="col-md-6 mb-3 form-group">
				<label>상품 총액</label>
		    	<input type="text" class="form-control" id="total_amount" name="total_amount" value="10000">
	          </div>
	          <div class="col-md-6 mb-3 form-group">
				<label>상품 비과세 금액</label>
		    	<input type="text" class="form-control" id="tax_free_amount" name="tax_free_amount" value="5000">
	          </div>
	        </div>
	
	        <div class="mb-3 form-group">
	          	<label>결제 성공 시 redirect url</label>
	          	<input type="text" class="form-control" id="approval_url" name="approval_url" value="https://luckyseven.co.kr/approval">
	        </div>
	        <div class="mb-3 form-group">
	          	<label>결제 취소 시 redirect url</label>
		    	<input type="text" class="form-control" id="cancel_url" name="cancel_url" value="https://luckyseven.co.kr/readycancel">
	        </div>
	        <div class="mb-3 form-group">
	         	<label>결제 실패 시 redirect url</label>
		    	<input type="text" class="form-control" id="fail_url" name="fail_url" value="https://luckyseven.co.kr/readyfail">
	        </div>
	
	        <hr class="mb-4">
	      </form>
	      <button class="btn btn-primary btn-lg btn-block" id="ready">1. 결제준비 요청</button>
	      
	    </div>
	  </div>
	  
	  <div class="bg-light mr-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden">
	    <div class="my-3 py-3">
	    	<h4 class="mb-3">결제준비 결과</h4>
	     	<pre class="text-left"><code class="JSON" id="codeblock"></code></pre>
	     	
	     	<hr class="mb-4">
	     	<button class="btn btn-primary btn-lg btn-block" id="redirectUrl">2. 결제창 열기</button>
	    </div>
		<div class="my-3 py-3">
	     	<h4 class="mb-3">승인정보</h4>
	     	<pre class="text-left"><code class="JSON" id="codeblock2"></code></pre>
	    </div> 	
	  </div>
	</div>
</body>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="../assets/js/vendor/jquery.slim.min.js"><\/script>')</script><script src="../assets/dist/js/bootstrap.bundle.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
    	var readyResponse = null;
    	
		$("#ready").click(function () {
        	var formData = new FormData(document.getElementById("my-form-id"));
        	
        	var xhttp = new XMLHttpRequest();
        	xhttp.open("POST", "/ready", true);
        	xhttp.responseType = 'json';
        	xhttp.onload = function (e) {
        		readyResponse = JSON.stringify(xhttp.response, undefined, 4);
        		document.getElementById("codeblock").innerHTML = readyResponse;
        		document.querySelectorAll('pre code').forEach((block) => {
	   				hljs.highlightBlock(block);
				});
       		};
        	xhttp.send(formData);
        });
		
		$("#redirectUrl").click(function () {
			var result = JSON.parse(readyResponse);
			
			var url = result.next_redirect_pc_url;
            var name = "popup test";
            var option = "width = 500, height = 500, top = 100, left = 200, location = no";
            window.open(url, name, option);
        });
    });
</script>
</html>
